<html ng-app="SportSpot_app">
<head>
  <title>Create. Gather. Play.</title>
  <!-- Style -->
  <link rel="stylesheet" type="text/css" href="./styles/css/bootstrap.min.css">
  <!-- javascript -->
  <script type="text/javascript" src="./styles/js/angular.min.js"></script>
  <script type="text/javascript" src="./styles/js/angular.min.js"></script>
  <script type="text/javascript" src="./styles/js/angular-route.min.js"></script>
  <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyC0h-mb8MjCMT4ndk2G4M21XeuScOAsYA8&signed_in=true&callback=initMap" async defer></script>
<script>
function initialize() {
  var mapProp = {
    center:new google.maps.LatLng(51.508742,-0.120850),
    zoom:5,
    mapTypeId:google.maps.MapTypeId.ROADMAP
  };
  var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>
  <script type="sty"></script>
  <script>
  var SportSpot_app = angular.module('SportSpot_app', ["ngRoute"]);

  SportSpot_app.config(function ($routeProvider){
    $routeProvider
      .when('/', {
        templateUrl: 'partials/loginReg.html'
      })
      .when('/main', {
        templateUrl: 'partials/main.html'
      })
      .otherwise({
        redirectTo: '/'
      });
  })

  SportSpot_app.controller('Users', function($scope, UsersFactory, $location) {
    var that = this

    that.register = function() {
      UsersFactory.register(that.newUser, function(newRegUser) {
        that.currUser = newRegUser;
        $location.path('/main')
      });
      that.newUser = {};
    }
  })



  SportSpot_app.factory('UsersFactory', function($http) {
    var factory = {};
    var Users = [];
    var currUser={}
    factory.register = function(newUser, callback) {
      console.log(newUser)
      $http.post('/Users', newUser).success(function(response) {
        currUser = response;
        callback(currUser);
      })
    }

  //   factory.addUser = function(new_friend, callback) {
  //     $http.post('/Users', new_friend).success(function(res) {
  //       Users.push({name: new_friend.name, age: new_friend.age});
  //       Users = res;
  //       callback(Users);
  //     })
  //   }
   return factory;
  })
  </script>
  <style type="text/css">
    .has-error{
      background-color:red;
    }
    #map {
      height: 100%;
    }
  </style>
</head>
<body>
  <div ng-controller="Users as UC">
    <div class="container">
      <div ng-view=""></div>
    </div>
  </div>
</body>
</html>